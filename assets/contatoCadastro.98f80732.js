var E=Object.defineProperty;var C=(e,n,t)=>n in e?E(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var i=(e,n,t)=>(C(e,typeof n!="symbol"?n+"":n,t),t);import"./modulepreload-polyfill.c7c6310f.js";import{a as I,C as d}from"./contatoLocalStorage.835b0817.js";class h{constructor(n,t,r,l,a){i(this,"id");i(this,"nome");i(this,"email");i(this,"telefone");i(this,"empresa");i(this,"cargo");this.id=Math.floor(Math.random()*65536),this.nome=n,this.telefone=r,this.email=t,this.empresa=l,this.cargo=a}}const s=document.getElementById("cargo"),f=document.getElementById("empresa"),m=document.getElementById("telefone"),c=document.getElementById("email"),p=document.getElementById("nome"),o=document.getElementById("campoIdentificacao"),y=document.getElementById("formularioContato");window.onload=function(){let e=new I,n=e.seleciona();e.excluir(),n&&D(n)};y.addEventListener("submit",function(e){const n=x();n==null?e.preventDefault():o.value==="0"?L(n)||e.preventDefault():o.value!=="0"&&($(n)||e.preventDefault())},!0);function v(e,n){return!(!w(e,n)||!T(e,n)||!B(e,n))}function B(e,n){let t=n.find(r=>r.telefone===e.telefone);return t==null||e.id===(t==null?void 0:t.id)?!0:(alert("Contatos n\xE3o podem usar Telefones repetidos. "),!1)}function T(e,n){let t=n.find(r=>r.email===e.email);return t==null||e.id===(t==null?void 0:t.id)?!0:(alert("Contatos n\xE3o podem usar Emails repetidos. "),!1)}function w(e,n){let t=n.find(r=>r.nome===e.nome);return t==null||e.id===(t==null?void 0:t.id)?!0:(alert("Contatos n\xE3o podem usar nomes repetidos. "),!1)}function x(){let e=p.value,n=c.value,t=m.value,r=s.value,l=f.value,a=new h(e,n,t,l,r);return o.value==="0"||(a.id=parseInt(o.value)),a}function L(e){const n=new d,t=n.selecionarTodos();return v(e,t)?(t.push(e),n.inserir(t),!0):!1}function $(e){const n=new d,t=n.selecionarTodos();if(v(e,t)){let l=t.findIndex(a=>a.id==e.id);return t[l]=e,n.inserir(t),!0}else return!1}function D(e){p.value=e.nome,c.value=e.email,m.value=e.telefone,s.value=e.cargo,f.value=e.empresa,o.value=e.id}const u=document.getElementById("telefone");u.addEventListener("keypress",e=>g(e.target.value));u.addEventListener("change",e=>g(e.target.value));const g=e=>{e=e.replace(/\D/g,""),e=e.replace(/^(\d{2})(\d)/g,"($1) $2"),e=e.replace(/(\d)(\d{4})$/,"$1-$2"),u.value=e};
